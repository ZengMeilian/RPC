核心功能实现主要分为服务寻址、序列化和反序列化、网络传输功能。

1.服务寻址功能
Call ID映射：

本地：在本地方法调用中，函数体是直接通过函数指针来指定的，但是在远程调用中，由于两个进程的地址空间完全不一样，函数指针不起作用。​ 远程：RPC中所有函数或方法都有自己的一个ID，在所有进程中都唯一。客户端在做远程过程调用时，必须附上这个ID，即客户端会查一下表，找出相应的Call ID，然后传给服务端，服务端也会查表，来确定客户端需要调用的函数，然后执行相应函数的代码。​ Call ID映射表一般是一个哈希表。

2.序列化和反序列化功能
序列化：将消息对象转换为二进制流。
反序列化：将二进制流转换为消息对象。
必要性： 远程调用涉及到数据的传输，在本地调用中，只需要将数据压入栈中，然后让函数去栈中读取即可。 但远程的数据传输，由于客户端和服务端不在同一个服务器上，涉及不同的进程，不能通过内存传递参数，此时就需要将客户端先将请求参数转成字节流（编码），传递给服务端，服务端再将字节流转为自己可读取格式（解码），这就是序列化和反序列化的过程。反之，服务端返回值也逆向经历序列化和反序列化到客户端。

序列化的优势： 将消息对象转为二进制字节流，便于网络传输。 可跨平台、跨语言。如Python编写的客户端请求序列化参数传输到Java编写的服务端进行反序列化。

3.网络传输功能
作用：

客户端将Call ID和序列化后的参数字节流传输给服务端。
服务端将序列化后的调用结果回传给客户端。
协议：   主要有TCP、UDP、HTTP协议。

4.基于TCP协议

​ 客户端和服务端建立Socket连接。​ 客户端通过Socket将需要调用的接口名称、方法名称及参数序列化后传递给服务端。 服务端反序列化后再利用反射调用对应的方法，将结果返回给客户端。

5.基于HTTP协议

​ 客户端向服务端发送请求，如GET、POST、PUT、DELETE等请求。​ 服务端根据不同的请求参数和请求URL进行方法调用，返回JSON或者XML数据结果。

6.TCP和HTTP对比

基于TCP协议实现的RPC调用，由于是底层协议栈，更佳灵活的对协议字段进行定制，可减少网络开销，提高性能，实现更大的吞吐量和并发数。但**，底层复杂，实现代价高**。
基于HTTP协议实现的RPC调用，已封装实现序列化，但HTTP属于应用层协议，HTTP传输所占用的字节数比TCP更高，传输效率对比TCP较低。
